<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Little Professor – Kopfrechnen</title>
<style>
body { font-family: sans-serif; background:#E0F7FA; display:flex; justify-content:center; padding:20px;}
.container { max-width:600px; width:100%; }
.card { background:white; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.controls { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-bottom:20px;}
button { padding:10px 20px; border:none; border-radius:8px; cursor:pointer;}
button.primary { background:#FFB74D; color:white;}
button.secondary { background:#B3E5FC;}
.task { font-size:2rem; text-align:center; margin:20px 0;}
.feedback { text-align:center; margin:10px 0; font-weight:bold;}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <div class="controls">
      <select id="op">
        <option value="all">Alles</option>
        <option value="+">Addition</option>
        <option value="-">Subtraktion</option>
        <option value="*">Multiplikation</option>
        <option value="/">Division</option>
      </select>
      <select id="level">
        <option value="1">Stufe 1</option>
        <option value="2">Stufe 2</option>
      </select>
      <button id="startBtn" class="primary">Start</button>
      <button id="restartBtn" class="secondary">Neu</button>
    </div>
    <div id="exercise"></div>
    <div id="feedback" class="feedback"></div>
  </div>
</div>

<script>
const TOTAL=5; // für Test kleiner
let tasks=[], current=0, correct=0;

const opEl = document.getElementById('op');
const levelEl = document.getElementById('level');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');
const exerciseEl = document.getElementById('exercise');
const feedbackEl = document.getElementById('feedback');

function randInt(n){ return Math.floor(Math.random()*n); }

function makeTask(level, opChoice){
  const ops = ['+','-','*','/'];
  const op = opChoice==='all'?ops[randInt(ops.length)]:opChoice;
  let a,b,res;
  switch(op){
    case '+': a=randInt(20); b=randInt(20); res=a+b; break;
    case '-': a=randInt(20); b=randInt(a+1); res=a-b; break;
    case '*': a=randInt(10); b=randInt(10); res=a*b; break;
    case '/': b=randInt(9)+1; let q=randInt(10)+1; a=b*q; res=q; break;
  }
  return {a,b,op,res};
}

function startTest(){
  tasks=[]; current=0; correct=0;
  for(let i=0;i<TOTAL;i++) tasks.push(makeTask(levelEl.value, opEl.value));
  startBtn.disabled=true;
  showTask();
}

function showTask(){
  if(current>=tasks.length){
    exerciseEl.innerHTML=`<p>Ende! Richtig: ${correct} / ${TOTAL}</p>`;
    startBtn.disabled=false;
    return;
  }
  const t = tasks[current];
  exerciseEl.innerHTML = `
    <div class="task">${t.a} ${t.op} ${t.b} = </div>
    <input type="number" id="answer" />
    <button id="okBtn">Prüfen</button>
  `;
  document.getElementById('okBtn').onclick = checkAnswer;
  document.getElementById('answer').focus();
}

function checkAnswer(){
  const t = tasks[current];
  const answer = parseInt(document.getElementById('answer').value,10);
  if(answer === t.res){
    correct++;
    feedbackEl.textContent = "Richtig!";
    feedbackEl.style.color = "green";
  } else {
    feedbackEl.textContent = `Falsch! Richtig: ${t.res}`;
    feedbackEl.style.color = "red";
  }
  current++;
  setTimeout(showTask,500);
}

startBtn.onclick = startTest;
restartBtn.onclick = ()=>{
  exerciseEl.innerHTML=''; feedbackEl.textContent=''; startBtn.disabled=false; current=0; correct=0;
}
</script>
</body>
</html>
